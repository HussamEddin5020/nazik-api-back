# ๐๏ธ ูููู ูุดุฑูุน Nazik API

## ๐ ุงูุจููุฉ ุงููุงููุฉ ูููุดุฑูุน

```
nodeJS/nzaik-api/
โ
โโโ ๐ server.js                    # ููุทุฉ ุจุฏุงูุฉ ุงูุชุทุจูู
โโโ ๐ package.json                 # ูุนูููุงุช ุงููุดุฑูุน ูุงูููุชุจุงุช
โโโ ๐ .env.example                 # ูุซุงู ูููู ุงูุจูุฆุฉ
โโโ ๐ .gitignore                   # ูููุงุช ูุณุชุซูุงุฉ ูู Git
โโโ ๐ README.md                    # ุฏููู ุงููุดุฑูุน ุงูุฑุฆูุณู
โโโ ๐ INSTALLATION.md              # ุฏููู ุงูุชุซุจูุช ุงูุชูุตููู
โโโ ๐ QUICK_START.md               # ุฏููู ุงูุจุฏุก ุงูุณุฑูุน
โโโ ๐ API_DOCUMENTATION.md         # ุชูุซูู ุงูู API
โ
โโโ ๐ config/                      # ูููุงุช ุงูุฅุนุฏุงุฏุงุช
โ   โโโ database.js                 # ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช MySQL
โ   โโโ constants.js                # ุงูุซูุงุจุช ุงูุนุงูุฉ ููุชุทุจูู
โ   โโโ swagger.js                  # ุฅุนุฏุงุฏุงุช Swagger Documentation
โ
โโโ ๐ constants/                   # ุงูุซูุงุจุช ุงููุชุฎุตุตุฉ
โ   โโโ orderPositions.js           # ุญุงูุงุช ุงูุทูุจุงุช
โ   โโโ permissions.js              # ุงูุตูุงุญูุงุช ูุงูุฅุฌุฑุงุกุงุช
โ
โโโ ๐ middleware/                  # ุงููุนุงูุฌุงุช ุงููุณูุทุฉ
โ   โโโ auth.js                     # ูุตุงุฏูุฉ JWT ูุงูุตูุงุญูุงุช
โ   โโโ errorHandler.js             # ูุนุงูุฌ ุงูุฃุฎุทุงุก ุงููุฑูุฒู
โ   โโโ notFound.js                 # ูุนุงูุฌ 404
โ   โโโ rateLimiter.js              # ุชุญุฏูุฏ ูุนุฏู ุงูุทูุจุงุช
โ   โโโ validator.js                # ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
โ
โโโ ๐ routes/                      # ูุณุงุฑุงุช API
โ   โโโ auth.routes.js              # ูุณุงุฑุงุช ุงููุตุงุฏูุฉ
โ   โโโ user.routes.js              # ูุณุงุฑุงุช ุงููุณุชุฎุฏููู
โ   โโโ customer.routes.js          # ูุณุงุฑุงุช ุงูุนููุงุก
โ   โโโ order.routes.js             # ูุณุงุฑุงุช ุงูุทูุจุงุช
โ   โโโ cart.routes.js              # ูุณุงุฑุงุช ุงูุนุฑุจุงุช
โ   โโโ box.routes.js               # ูุณุงุฑุงุช ุงูุตูุงุฏูู
โ   โโโ shipment.routes.js          # ูุณุงุฑุงุช ุงูุดุญูุงุช
โ   โโโ invoice.routes.js           # ูุณุงุฑุงุช ุงูููุงุชูุฑ
โ   โโโ address.routes.js           # ูุณุงุฑุงุช ุงูุนูุงููู
โ   โโโ dashboard.routes.js         # ูุณุงุฑุงุช ููุญุฉ ุงูุชุญูู
โ   โโโ audit.routes.js             # ูุณุงุฑุงุช ุณุฌูุงุช ุงูุชุฏููู
โ
โโโ ๐ controllers/                 # ุงููุชุญููุงุช (Business Logic)
โ   โโโ auth.controller.js          # ุชุณุฌูู ุงูุฏุฎูู ูุงูุชุณุฌูู
โ   โโโ user.controller.js          # ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
โ   โโโ customer.controller.js      # ุฅุฏุงุฑุฉ ุงูุนููุงุก
โ   โโโ order.controller.js         # ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
โ   โโโ cart.controller.js          # ุฅุฏุงุฑุฉ ุงูุนุฑุจุงุช
โ   โโโ box.controller.js           # ุฅุฏุงุฑุฉ ุงูุตูุงุฏูู
โ   โโโ shipment.controller.js      # ุฅุฏุงุฑุฉ ุงูุดุญูุงุช
โ   โโโ invoice.controller.js       # ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ
โ   โโโ address.controller.js       # ุงููุฏู ูุงูููุงุทู
โ   โโโ dashboard.controller.js     # ููุญุฉ ุงูุชุญูู
โ   โโโ audit.controller.js         # ุณุฌูุงุช ุงูุชุฏููู
โ
โโโ ๐ models/                      # ููุงุฐุฌ ุงูุจูุงูุงุช
โ   โโโ User.model.js               # ูููุฐุฌ ุงููุณุชุฎุฏู
โ   โโโ Customer.model.js           # ูููุฐุฌ ุงูุนููู
โ   โโโ Order.model.js              # ูููุฐุฌ ุงูุทูุจ
โ
โโโ ๐ services/                    # ุฎุฏูุงุช ุงูุนูู (Business Services)
โ   โโโ auth.service.js             # ุฎุฏูุงุช ุงููุตุงุฏูุฉ
โ   โโโ order.service.js            # ุฎุฏูุงุช ุงูุทูุจุงุช
โ
โโโ ๐ validators/                  # ุงูุชุญูู ูู ุงูุจูุงูุงุช
โ   โโโ auth.validator.js           # ุงูุชุญูู ูู ุจูุงูุงุช ุงููุตุงุฏูุฉ
โ   โโโ order.validator.js          # ุงูุชุญูู ูู ุจูุงูุงุช ุงูุทูุจุงุช
โ
โโโ ๐ utils/                       # ุฃุฏูุงุช ูุณุงุนุฏุฉ
    โโโ asyncHandler.js             # ูุนุงูุฌ ุงูุฏูุงู async
    โโโ helpers.js                  # ุฏูุงู ูุณุงุนุฏุฉ ุนุงูุฉ
```

---

## ๐ ุชุฏูู ุงูุจูุงูุงุช (Data Flow)

```
Client Request
      โ
   server.js (Express App)
      โ
   Middleware (auth, validation, rate limiting)
      โ
   Routes (URL mapping)
      โ
   Controllers (Business logic)
      โ
   Services/Models (Database operations)
      โ
   Database (MySQL)
      โ
   Response (JSON)
      โ
   Client
```

---

## ๐ฏ ุงูููููุงุช ุงูุฑุฆูุณูุฉ

### 1. **server.js**
- ุชููุฆุฉ Express
- ุชุญููู Middleware
- ุฑุจุท ุงููุณุงุฑุงุช
- ุจุฏุก ุงูุฎุงุฏู

### 2. **Routes**
- ุชุนุฑูู endpoints
- ุฑุจุท Controllers
- ุชุทุจูู Middleware ุงูููุงุณุจ

### 3. **Controllers**
- ุงุณุชูุจุงู ุงูุทูุจุงุช
- ุงูุชุญูู ูู ุงูุจูุงูุงุช
- ุงุณุชุฏุนุงุก Services
- ุฅุฑุฌุงุน ุงูุฑุฏูุฏ

### 4. **Services**
- ููุทู ุงูุนูู ุงููุนูุฏ
- ุนูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
- Transactions

### 5. **Models**
- ุชูุซูู ุงูููุงูุงุช
- ุนูููุงุช CRUD ุงูุฃุณุงุณูุฉ
- ุงุณุชุนูุงูุงุช ูุฎุตุตุฉ

### 6. **Middleware**
- ุงููุตุงุฏูุฉ ูุงูุชูููุถ
- ุงูุชุญูู ูู ุงูุจูุงูุงุช
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- Rate Limiting

---

## ๐ ูุธุงู ุงููุตุงุฏูุฉ

```
1. User/Customer ูุณุฌู ุฏุฎูู
2. ูุชู ุงูุชุญูู ูู ุงูุจูุงูุงุช
3. ูุชู ุฅูุดุงุก JWT Token
4. ุงูู Token ููุฑุณู ููู Client
5. Client ูุฑุณู ุงูู Token ูู ูู ุทูุจ
6. Middleware ูุชุญูู ูู ุงูู Token
7. ูุชู ุชุนููู User ูู req.user
8. ูุชู ุชุนููู Session Variables ููู Database
```

---

## ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### Session Variables ุงููุณุชุฎุฏูุฉ:
- `@current_user_id` - ูุนุฑู ุงููุณุชุฎุฏู ุงูุญุงูู
- `@current_user_type` - ููุน ุงููุณุชุฎุฏู (customer/user)

### Triggers:
ุชููู Triggers ุชููุงุฆูุงู ุจู:
- ุชุณุฌูู ุฌููุน ุงูุนูููุงุช ูู `unified_audit_log`
- ุชุญุฏูุซ ุงูุนุฏุงุฏุงุช (cart.orders_count)
- ุฅูุดุงุก ุณุฌู ูู `order_status_history` ุนูุฏ ุชุบููุฑ ุงูุญุงูุฉ

---

## ๐ง ุงูููุชุจุงุช ุงููุณุชุฎุฏูุฉ

| ุงูููุชุจุฉ | ุงูุงุณุชุฎุฏุงู |
|---------|-----------|
| express | ุฅุทุงุฑ ุงูุนูู ุงูุฑุฆูุณู |
| mysql2 | ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช |
| bcrypt | ุชุดููุฑ ูููุงุช ุงููุฑูุฑ |
| jsonwebtoken | ุงููุตุงุฏูุฉ JWT |
| cors | ุงูุณูุงุญ ุจุทูุจุงุช Cross-Origin |
| helmet | ุญูุงูุฉ HTTP headers |
| morgan | ุชุณุฌูู ุงูุทูุจุงุช |
| express-validator | ุงูุชุญูู ูู ุงูุจูุงูุงุช |
| express-rate-limit | ุชุญุฏูุฏ ูุนุฏู ุงูุทูุจุงุช |
| compression | ุถุบุท ุงูุฑุฏูุฏ |
| dotenv | ุฅุฏุงุฑุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ |

---

## ๐จ ูุนุงููุฑ ุงูููุฏ

### ุชุณููุฉ ุงููููุงุช:
- Controllers: `*.controller.js`
- Routes: `*.routes.js`
- Models: `*.model.js`
- Services: `*.service.js`
- Validators: `*.validator.js`

### ุชุณููุฉ ุงูุฏูุงู:
- camelCase ููุฏูุงู
- PascalCase ููู Classes
- UPPER_CASE ููุซูุงุจุช

### ุชูุณูู ุงูุฃููุงุฏ:
- ุงุณุชุฎุฏุงู async/await
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุงุณุชุฎุฏุงู try/catch
- ุงุณุชุฎุฏุงู asyncHandler ููู route handlers

---

Made with โค๏ธ by Nazik Team

